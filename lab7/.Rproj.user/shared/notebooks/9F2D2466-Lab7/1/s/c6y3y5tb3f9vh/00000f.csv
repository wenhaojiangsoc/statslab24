"0","set.seed(2023)"
"0",""
"0","## empty results"
"0","woz <- c()"
"0","wz <- c()"
"0",""
"0","for (i in 1:1000){"
"0","  "
"0"," ## create hypothetical variables"
"0","  X <- runif(500, min=1, max=10)"
"0","  Z <- runif(500, min=2, max=5) + 0.5*X"
"0","  Y <- 2*Z + rnorm(500,0,1)"
"0","  "
"0","  ## data"
"0","  data <- data.frame(X=X,Y=Y,Z=Z)"
"0","  "
"0","  ## regression"
"0","  lm1 <- lm(Y ~ X, data)"
"0","  lm2 <- lm(Y ~ X + Z, data) "
"0","  "
"0","  ## extract results"
"0","  woz <- c(woz, summary(lm1)$coef[2,1])"
"0","  wz <- c(wz, summary(lm2)$coef[2,1])"
"0","}"
"0",""
"0","## combine results"
"0","results <-"
"0","  data.frame(estimate = c(woz,wz),"
"0","             category = c(rep(""Z excluded"",1000),rep(""Z included"",1000)))"
"0",""
"0","mean <- results %>%"
"0","  group_by(category) %>%"
"0","  summarize(mean = mean(estimate))"
"0",""
"0","## plot"
"0","results %>%"
"0","  ggplot(aes(x=estimate,group=category)) +"
"0","  geom_density(aes(color=category),bw=0.01) +"
"0","  geom_vline(data = mean, aes(xintercept = mean, color = category)) +"
"0","  scale_color_manual(values=c(""#999999"", ""red3"")) +"
"0","  xlab(""Estimate of X's slope, True = 5"") +"
"0","  theme_bw()"
